# Web3 信息聚合服务 - 测试用例与验收标准

> **文档版本**: v1.0  
> **适用范围**: MVP 阶段功能验收  
> **验收人员**: 兼职开发人员

---

## 一、验收概览

### 1.1 功能模块清单

| 模块 | 优先级 | 验收状态 |
|------|--------|----------|
| 1. 用户注册与 Telegram 绑定 | P0 | ☐ |
| 2. AI 对话式偏好收集 | P0 | ☐ |
| 3. 信息源管理 | P0 | ☐ |
| 4. 信息抓取引擎 | P0 | ☐ |
| 5. AI 智能筛选 | P0 | ☐ |
| 6. AI 简报生成 | P0 | ☐ |
| 7. Telegram 推送 | P0 | ☐ |
| 8. 用户反馈收集 | P0 | ☐ |
| 9. 反馈学习闭环 | P1 | ☐ |

### 1.2 验收通过标准

- 所有 P0 模块测试用例 **100% 通过**
- P1 模块测试用例 **80% 以上通过**
- 无阻塞性 Bug（影响核心流程）
- 端到端流程可完整跑通

---

## 二、测试用例

### 模块 1：用户注册与 Telegram 绑定

#### TC-1.1 新用户启动 Bot

| 项目 | 内容 |
|------|------|
| **前置条件** | 用户未注册 |
| **操作步骤** | 1. 用户在 Telegram 搜索并打开 Bot<br>2. 点击 "Start" 或发送 `/start` |
| **预期结果** | Bot 返回欢迎语，引导用户开始偏好设置对话 |
| **通过** | ☐ |

#### TC-1.2 已注册用户重新启动

| 项目 | 内容 |
|------|------|
| **前置条件** | 用户已完成注册 |
| **操作步骤** | 发送 `/start` |
| **预期结果** | Bot 识别已注册，显示主菜单或最近简报 |
| **通过** | ☐ |

---

### 模块 2：AI 对话式偏好收集（核心）

#### TC-2.1 完整 3 轮对话流程

| 项目 | 内容 |
|------|------|
| **前置条件** | 新用户启动 Bot |
| **操作步骤** | 按 AI 引导完成 3 轮对话 |
| **预期结果** | 见下方详细流程 |
| **通过** | ☐ |

**详细流程验证**：

| 轮次 | AI 行为 | 用户输入示例 | 验证点 |
|------|---------|--------------|--------|
| 第 1 轮 | AI 询问用户关注的 Web3 领域 | "我主要玩 DeFi 和 L2" | ☐ AI 正确发起对话 |
| 第 2 轮 | AI 追问细节（内容类型、信息源） | "链上数据为主，关注 lookonchain" | ☐ AI 能基于上文追问 |
| 第 3 轮 | AI 总结确认用户偏好 | 用户点击"确认" | ☐ AI 正确总结偏好 |

#### TC-2.2 AI 理解自然语言偏好

| 项目 | 内容 |
|------|------|
| **操作步骤** | 用户用口语化表达偏好："我想看大户怎么操作的，还有空投消息" |
| **预期结果** | AI 能理解并提取：链上数据、大户动向、空投信息 |
| **通过** | ☐ |

#### TC-2.3 偏好存储验证

| 项目 | 内容 |
|------|------|
| **前置条件** | 用户完成 3 轮对话 |
| **验证方式** | 查询数据库用户画像 |
| **预期结果** | 用户偏好被正确存储，包含：关注领域、关注项目、偏好来源、AI 生成的自然语言描述 |
| **通过** | ☐ |

#### TC-2.4 偏好修改

| 项目 | 内容 |
|------|------|
| **操作步骤** | 用户发送 `/settings` 或 "修改偏好" |
| **预期结果** | AI 重新发起对话，允许用户更新偏好 |
| **通过** | ☐ |

---

### 模块 3：信息源管理

#### TC-3.1 查看预设信息源

| 项目 | 内容 |
|------|------|
| **操作步骤** | 用户发送 `/sources` |
| **预期结果** | 显示预设信息源列表（Twitter 账号、网站），可勾选/取消 |
| **通过** | ☐ |

#### TC-3.2 添加自定义 Twitter 账号

| 项目 | 内容 |
|------|------|
| **操作步骤** | 用户输入 "@VitalikButerin" |
| **预期结果** | 系统验证账号存在，添加成功，显示确认 |
| **通过** | ☐ |

#### TC-3.3 添加自定义网站

| 项目 | 内容 |
|------|------|
| **操作步骤** | 用户输入 "https://www.theblock.co" |
| **预期结果** | 系统验证 URL 有效，添加成功 |
| **通过** | ☐ |

#### TC-3.4 无效信息源处理

| 项目 | 内容 |
|------|------|
| **操作步骤** | 用户输入无效 Twitter 账号或无法访问的 URL |
| **预期结果** | 系统提示错误，不添加 |
| **通过** | ☐ |

---

### 模块 4：信息抓取引擎

#### TC-4.1 Twitter 数据抓取

| 项目 | 内容 |
|------|------|
| **验证方式** | 检查数据库/日志 |
| **预期结果** | 预设 Twitter 账号的推文被正确抓取，包含：内容、时间、来源账号、原文链接 |
| **通过** | ☐ |

#### TC-4.2 网站/RSS 数据抓取

| 项目 | 内容 |
|------|------|
| **验证方式** | 检查数据库/日志 |
| **预期结果** | 预设网站的文章被正确抓取，包含：标题、摘要、时间、链接 |
| **通过** | ☐ |

#### TC-4.3 抓取频率

| 项目 | 内容 |
|------|------|
| **验证方式** | 检查定时任务日志 |
| **预期结果** | 抓取任务按设定频率执行（如每小时） |
| **通过** | ☐ |

#### TC-4.4 去重机制

| 项目 | 内容 |
|------|------|
| **验证方式** | 同一信息多次抓取 |
| **预期结果** | 重复内容不重复入库 |
| **通过** | ☐ |

---

### 模块 5：AI 智能筛选（核心）

#### TC-5.1 基于用户偏好筛选

| 项目 | 内容 |
|------|------|
| **前置条件** | 用户设置偏好为 "DeFi + L2"，原始信息池包含 DeFi、NFT、Meme 等多类内容 |
| **验证方式** | 检查筛选结果 |
| **预期结果** | 筛选出的内容以 DeFi、L2 相关为主，NFT/Meme 内容被过滤或降权 |
| **通过** | ☐ |

#### TC-5.2 信息数量控制

| 项目 | 内容 |
|------|------|
| **验证方式** | 检查筛选结果数量 |
| **预期结果** | 每日筛选出 15-30 条信息（可配置） |
| **通过** | ☐ |

#### TC-5.3 重要信息识别

| 项目 | 内容 |
|------|------|
| **前置条件** | 原始信息包含行业重大事件（如 ETH 升级、大额融资） |
| **预期结果** | 重大事件被筛选为 "今日必看"，即使不完全匹配用户偏好 |
| **通过** | ☐ |

---

### 模块 6：AI 简报生成（核心）

#### TC-6.1 简报结构完整性

| 项目 | 内容 |
|------|------|
| **验证方式** | 检查生成的简报内容 |
| **预期结果** | 简报包含以下完整结构，且无语义重复新闻信息 |
| **通过** | ☐ |

**简报结构检查清单**：

| 模块 | 内容要求 | 通过 |
|------|----------|------|
| 标题 | 包含日期、精选条数 | ☐ |
| 今日必看 | Top 3 重要信息，含标题、摘要、来源、链接 | ☐ |
| 分类详情 | 按领域分类展示更多信息 | ☐ |
| 价值展示 | 监控源数、扫描条数、精选条数、节省时间 | ☐ |
| 反馈入口 | 👍有用 / 👎不太行 按钮 | ☐ |

#### TC-6.2 简报示例验证

**预期简报格式**：

```
📰 Web3 每日简报
📅 2026年1月11日 | 为您精选 15 条

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

🔥 今日必看

1️⃣ [重要] 标题内容
   > 一句话摘要...
   📍 来源: @xxx | 🔗 查看原文

2️⃣ ...
3️⃣ ...

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📂 更多信息

【DeFi】2 条
• 信息标题 (@来源) 🔗
• ...

【Layer2】3 条
• ...

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📊 今日为您做了什么

• 监控信息源: XX 个
• 扫描原始信息: XXX 条
• 为您精选: XX 条（仅占 X.X%）
• 今日为您节省: 约 X.X 小时

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

💬 今天的简报对你有帮助吗？
[👍 有用]  [👎 不太行]
```

#### TC-6.3 个性化验证

| 项目 | 内容 |
|------|------|
| **前置条件** | 两个用户，偏好分别为 "DeFi" 和 "NFT" |
| **预期结果** | 两个用户收到的简报内容明显不同，各自匹配其偏好 |
| **通过** | ☐ |

#### TC-6.4 链接可访问性

| 项目 | 内容 |
|------|------|
| **操作步骤** | 点击简报中的 "查看原文" 链接 |
| **预期结果** | 能正确跳转到原始信息页面 |
| **通过** | ☐ |

---

### 模块 7：Telegram 推送

#### TC-7.1 定时推送

| 项目 | 内容 |
|------|------|
| **验证方式** | 设置推送时间，等待触发 |
| **预期结果** | 在设定时间（如每天 9:00）自动推送简报 |
| **通过** | ☐ |

#### TC-7.2 推送成功率

| 项目 | 内容 |
|------|------|
| **验证方式** | 检查推送日志 |
| **预期结果** | 推送成功率 > 99%，失败有错误记录 |
| **通过** | ☐ |

#### TC-7.3 消息格式正确

| 项目 | 内容 |
|------|------|
| **验证方式** | 在 Telegram 中查看收到的简报 |
| **预期结果** | 格式正确渲染，Markdown 正常显示，按钮可点击 |
| **通过** | ☐ |

---

### 模块 8：用户反馈收集

#### TC-8.1 整体评价反馈

| 项目 | 内容 |
|------|------|
| **操作步骤** | 用户点击简报底部 "👍 有用" |
| **预期结果** | 系统记录反馈，Bot 回复感谢 |
| **通过** | ☐ |

#### TC-8.2 负面反馈追问

| 项目 | 内容 |
|------|------|
| **操作步骤** | 用户点击 "👎 不太行" |
| **预期结果** | Bot 弹出原因选择：<br>☐ 内容不感兴趣<br>☐ 漏掉重要信息<br>☐ 信息太多/太杂<br>☐ 信息太少<br>☐ 其他 |
| **通过** | ☐ |

#### TC-8.3 单条信息反馈

| 项目 | 内容 |
|------|------|
| **操作步骤** | 用户对某条信息点击 "👎 不感兴趣" 或 "⭐ 很有用" |
| **预期结果** | 系统记录该条信息的反馈，关联信息 ID 和来源 |
| **通过** | ☐ |

#### TC-8.4 反馈数据存储

| 项目 | 内容 |
|------|------|
| **验证方式** | 查询数据库 |
| **预期结果** | 反馈数据正确存储，包含：user_id, date, rating, reason, item_feedbacks |
| **通过** | ☐ |

---

### 模块 9：反馈学习闭环（P1）

#### TC-9.1 AI 分析反馈

| 项目 | 内容 |
|------|------|
| **前置条件** | 用户有 7 天以上的反馈数据 |
| **验证方式** | 触发 AI 分析任务，检查输出 |
| **预期结果** | AI 输出分析结果：用户喜欢/不喜欢的内容、来源、偏好变化总结 |
| **通过** | ☐ |

#### TC-9.2 用户画像更新

| 项目 | 内容 |
|------|------|
| **前置条件** | AI 完成反馈分析 |
| **验证方式** | 查询数据库用户画像 |
| **预期结果** | 用户画像 `ai_understanding` 字段被更新，包含 AI 的自然语言理解 |
| **通过** | ☐ |

#### TC-9.3 个性化进化验证

| 项目 | 内容 |
|------|------|
| **前置条件** | 用户多次标记 "Meme 币" 内容为 "不感兴趣" |
| **预期结果** | 后续简报中 Meme 币内容明显减少或消失 |
| **通过** | ☐ |

---

## 三、端到端测试

### E2E-1 新用户完整流程

| 步骤 | 操作 | 预期结果 | 通过 |
|------|------|----------|------|
| 1 | 启动 Bot | 显示欢迎语 | ☐ |
| 2 | 完成 3 轮 AI 对话 | 偏好设置成功 | ☐ |
| 3 | 查看/修改信息源 | 正常显示和操作 | ☐ |
| 4 | 等待推送时间 | 收到个性化简报 | ☐ |
| 5 | 点击反馈按钮 | 反馈记录成功 | ☐ |
| 6 | 点击原文链接 | 正确跳转 | ☐ |

### E2E-2 老用户日常使用

| 步骤 | 操作 | 预期结果 | 通过 |
|------|------|----------|------|
| 1 | 每日收到简报 | 按时推送，内容个性化 | ☐ |
| 2 | 持续反馈 7 天 | 简报越来越符合偏好 | ☐ |
| 3 | 修改偏好设置 | 下次简报反映新偏好 | ☐ |

---

## 四、验收检查清单

### 4.1 功能验收

| 检查项 | 标准 | 通过 |
|--------|------|------|
| 用户可通过 Telegram 完成注册 | 3 轮对话流程顺畅 | ☐ |
| AI 能正确理解用户自然语言偏好 | 准确率 > 90% | ☐ |
| 信息抓取正常运行 | Twitter + 网站数据完整 | ☐ |
| AI 筛选符合用户偏好 | 相关度 > 80% | ☐ |
| 简报格式正确完整 | 包含所有必要模块 | ☐ |
| 定时推送准时可靠 | 误差 < 5 分钟 | ☐ |
| 反馈机制正常工作 | 数据正确记录 | ☐ |

### 4.2 性能验收

| 检查项 | 标准 | 通过 |
|--------|------|------|
| AI 对话响应时间 | < 5 秒 | ☐ |
| 简报生成时间 | < 30 秒/用户 | ☐ |
| 系统支持用户数 | ≥ 100 人并发 | ☐ |

### 4.3 数据验收

| 检查项 | 标准 | 通过 |
|--------|------|------|
| 用户数据持久化 | 重启后数据不丢失 | ☐ |
| 日志记录完整 | 关键操作有日志 | ☐ |
| 错误处理 | 异常有记录，不崩溃 | ☐ |

---

## 五、Bug 分级标准

| 级别 | 定义 | 处理要求 |
|------|------|----------|
| **P0 阻塞** | 核心流程无法完成 | 必须修复才能验收 |
| **P1 严重** | 功能异常但有绕过方案 | 验收前修复 |
| **P2 一般** | 体验问题，不影响使用 | 可延后修复 |
| **P3 建议** | 优化建议 | 按需处理 |

---

## 六、验收结论

| 项目 | 结果 |
|------|------|
| 验收日期 | |
| 验收人员 | |
| P0 用例通过率 | /100% |
| P1 用例通过率 | /80% |
| 遗留问题数 | P0:__ P1:__ P2:__ |
| **最终结论** | ☐ 通过 / ☐ 有条件通过 / ☐ 不通过 |

**备注**：

---

> 如有疑问请联系产品负责人
